<div ng-controller='avegauge' ng-init="init()">

<style>
    table.tableSection {
        display: table;
        width: 100%;
    }
    table.tableSection thead, table.tableSection tbody {
        float: left;
        width: 100%;
    }
    table.tableSection tbody {
        overflow: auto;
        /*height: 150px;*/
    }
    table.tableSection tr {
        width: 100%;
        display: table;
        text-align: left;
    }
    table.tableSection th, table.tableSection td {
        width: 33%;
    }
    .floatleft{
      float:left;
    }
    .floatright{
      float:right;
    }

    .below{
      display: inline-block !important;
    }

    .leftRightLegend {
      margin-left: 10px;
      margin-right: 10px; 
      overflow:overlay; 
      padding-right:10px 
    }

    .label{
      font-size:22.5px;
      fill:#ffffff;
      text-anchor:middle;
      alignment-baseline:middle;
    }
    .face{
      stroke:#c8c8c8;
      stroke-width:2;
    }
    .minorTicks{
      stroke-width:2;
      stroke:white;
    }
    .majorTicks{
      stroke:white;
      stroke-width:3;
    }
    </style>
  <div ng-style="{'display':panel.display}">
  <!-- START Pie or bar chart -->
  <div   ng-if="panel.counter_pos == 'above'" id='{{$id}}-legend'>
    <!-- vertical legend above -->
    <table class="small" ng-if="panel.arrangement == 'vertical'">
      <tr ng-repeat="term in legend">
        <td><i class="icon-circle" ng-style="{color:term.color}"></i></td> <td style="padding-right:10px;padding-left:10px;">{{term.label}}</td>
        <td>{{dashboard.numberWithCommas(term.data[0][1].toFixed(panel.decimal_points))}}</td>
      </tr>
    </table>

    <!-- horizontal legend above -->
    <div class="small" ng-if="panel.arrangement == 'horizontal'" ng-repeat="term in legend" style="float:left;padding-left: 10px;">
      <span><i class="icon-circle" ng-style="{color:term.color}"></i> {{term.label}} ({{dashboard.numberWithCommas(term.data[0][1].toFixed(panel.decimal_points))}}) </span>
    </div><br>

  </div>
    <div ng-if="panel.chart == 'd3'"><div class="pointer" ng-style="panel.style" style="line-height:1;text-align:center"><svg width="900" height="700"></svg></div></div>
  <!-- keep legend from over lapping -->
  <div  style="clear:both"></div>



  <div  style="overflow:hidden"  avegauge-chart params="{{panel}}" style="position:relative" class="pointer" ng-style="{'floatleft':panel.counter_pos == 'right'}" id='{{$id}}'></div>

  <div  ng-if="panel.counter_pos == 'below' " id='{{$id}}-legend' ng-class="{below:panel.counter_pos == 'below'}">
    <!-- vertical legend below -->
    <table class="small" ng-if="panel.arrangement == 'vertical'">
      <tr ng-repeat="term in legend">
        <td><i class="icon-circle" ng-style="{color:term.color}"></i></i></td> <td style="padding-right:10px;padding-left:10px;">{{term.label}}</td>
        <td>{{dashboard.numberWithCommas(term.data[0][1].toFixed(panel.decimal_points))}}</td>
      </tr>
    </table>

    <!-- horizontal legend below -->
    <div class="small" ng-if="panel.arrangement == 'horizontal'" ng-repeat="term in legend" style="float:left;padding-left: 10px;">
      <span><i class="icon-circle" ng-style="{color:term.color}"></i> {{term.label}} ({{dashboard.numberWithCommas(term.data[0][1].toFixed(panel.decimal_points))}}) </span>
    </div><br>

  </div>
  <!-- END Pie or Bar chart -->

  <!-- START Table -->

  <!-- END Table -->
  <!-- Dummy div for testing color name -->
  <div id="colorTest"></div>
</div>
</div>
